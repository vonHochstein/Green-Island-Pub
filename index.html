<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Whiskydatenbank – Green Island Pub (Demo)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="brand">
        <div class="brand-mark">GI</div>
        <div class="brand-text">
          <h1>Green Island Pub Zeitz</h1>
          <p>Whiskydatenbank · Demo-Version</p>
        </div>
      </div>
      <div class="header-badge">Demo</div>
    </div>
  </header>

  <main class="wrapper">
    
    <section id="authBar" class="auth-bar">
      <span id="authStatus">Als Gast unterwegs</span>
      <div class="auth-actions">
        <button id="loginButton" type="button">Anmelden / Registrieren</button>
        <button id="logoutButton" type="button" class="hidden">Abmelden</button>
      </div>
    </section>
    
    <section id="progressBarSection" class="progress-section hidden">
      <div id="progressText" class="progress-text"></div>
      <div class="progress-bar-wrapper">
        <div id="progressBar" class="progress-bar"></div>
      </div>
    </section>
    
    <section class="filters">
      <input
        id="searchInput"
        type="text"
        placeholder="Suche nach Name, Destillerie, Stil, Land …"
      />

    <select id="sortSelect">
      <option value="name_asc">Name A–Z</option>
      <option value="name_desc">Name Z–A</option>
      <option value="price_asc">Preis aufsteigend</option>
      <option value="price_desc">Preis absteigend</option>
      <option value="abv_desc">Stärke (Vol.%) absteigend</option>
      <option value="abv_asc">Stärke (Vol.%) aufsteigend</option>
      <option value="rating_desc">Bewertung absteigend</option>
      <option value="rating_asc">Bewertung aufsteigend</option>
    </select>

    <section id="status" class="status">
      Lade Whiskys …
    </section>

    <section id="whiskyGrid" class="whisky-grid">
      <!-- Karten werden per JS eingefügt -->
    </section>
  </main>

  <!-- Detail-Overlay für einzelnen Whisky -->
  <div id="detailOverlay" class="detail-overlay" aria-hidden="true">
    <div class="detail-backdrop" id="detailBackdrop"></div>

    <article class="detail-panel">
      <button class="detail-close" id="detailClose" aria-label="Schließen">×</button>

      <div class="detail-image-wrapper">
        <img id="detailImage" src="" alt="Whisky" />
      </div>

      <div class="detail-content">
        <h2 id="detailName"></h2>
        <p id="detailMeta" class="detail-meta"></p>
        <p id="detailPrice" class="detail-price"></p>
        <p id="detailDescription" class="detail-description"></p>
        
        <div id="ratingSection" class="rating-section">
          <div id="ratingStars" class="rating-stars">
            <button type="button" data-value="1">★</button>
            <button type="button" data-value="2">★</button>
            <button type="button" data-value="3">★</button>
            <button type="button" data-value="4">★</button>
            <button type="button" data-value="5">★</button>
          </div>
        
          <textarea
            id="ratingNote"
            class="rating-note"
            rows="3"
            placeholder="Deine persönliche Notiz zu diesem Whisky …"
          ></textarea>
        
          <button type="button" id="ratingSave" class="rating-save">
            Bewertung speichern
          </button>
        
          <p id="ratingHint" class="rating-hint">
            Bitte anmelden, um zu bewerten.
          </p>
        </div>
      </div>
    </article>
  </div>
  
  <!-- Auth-Overlay für Login / Registrierung -->
  <div id="authOverlay" class="auth-overlay" aria-hidden="true">
    <div class="detail-backdrop" id="authBackdrop"></div>

    <article class="auth-panel">
      <button class="detail-close" id="authClose" aria-label="Schließen">×</button>

      <h2 id="authTitle">Anmelden</h2>
      <p id="authHint" class="auth-hint">
        Melde dich mit deiner E-Mail und deinem Passwort an.
      </p>

      <form id="authForm" class="auth-form">
        <label class="auth-field auth-displayname-field">
          Anzeigename (nur bei Registrierung)
          <input id="authDisplayName" type="text" autocomplete="nickname" />
        </label>

        <label class="auth-field">
          E-Mail
          <input id="authEmail" type="email" autocomplete="email" required />
        </label>

        <label class="auth-field">
          Passwort
          <input id="authPassword" type="password" autocomplete="current-password" required />
        </label>

        <button type="submit" id="authSubmit" class="auth-submit">
          Anmelden
        </button>
      </form>

      <div class="auth-switch">
        <button type="button" id="switchToRegister" class="auth-link">
          Noch kein Konto? Registrieren
        </button>
        <button type="button" id="switchToLogin" class="auth-link hidden">
          Schon registriert? Anmelden
        </button>
      </div>

      <p class="auth-message" id="authMessage"></p>
    </article>
  </div>

  <!-- Supabase UMD Build -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
  <script src="app.js"></script>
</body>
</html>